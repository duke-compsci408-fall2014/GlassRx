package com.compsci408.requests;

import org.json.JSONArray;

import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

public class RESTClient {
	
	private static RESTClient instance;
	
	private GetTask mGet;
	private HttpPost mPost;
	
	private Context mContext;
	
	public static RESTClient getRESTClient(Context context) {
		if (instance == null) {
			instance = new RESTClient();
			instance.mContext = context;
			instance.mGet = new GetTask();
			instance.mPost = new HttpPost();
		}
		return instance;
		
	}
	
	private boolean checkConnection() {
		ConnectivityManager connMgr = (ConnectivityManager) 
		        mContext.getSystemService(Context.CONNECTIVITY_SERVICE);
	    
		NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
	    return networkInfo != null && networkInfo.isConnected();
	}
	
	public JSONArray doGet(String url) {
		if (checkConnection()) {
			return mGet.execute(url);
		}
		return null;
	}

}
