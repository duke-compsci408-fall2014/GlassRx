package com.compsci408.requests;

import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.io.UnsupportedEncodingException;

import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

public class NetworkUtils {
	
	/**
	 * Read an {@link InputStream} into a String
	 * @param stream  Stream to be read
	 * @param len  number of bytes to read
	 * @return
	 * @throws IOException
	 * @throws UnsupportedEncodingException
	 */
	public static String readStream(InputStream stream, int len) throws IOException, UnsupportedEncodingException {
		Reader reader = null;
		reader = new InputStreamReader(stream, "UTF-8");
		char[] buffer = new char[len];
		reader.read(buffer);
		return new String(buffer);
	}
	
	/**
	 * Check the current network connectivity
	 * @return  Boolean indicating availability of network connection
	 */
	public static boolean checkConnection(Context context) {
		ConnectivityManager connMgr = (ConnectivityManager) 
		        context.getSystemService(Context.CONNECTIVITY_SERVICE);
	    
		NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
	    return networkInfo != null && networkInfo.isConnected();
	}
	

}
