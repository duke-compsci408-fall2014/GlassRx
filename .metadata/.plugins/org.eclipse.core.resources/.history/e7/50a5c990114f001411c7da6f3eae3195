package com.compsci408.requests;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.io.UnsupportedEncodingException;

import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

public class NetworkUtils {
	
	/**
	 * Read an {@link InputStream} into a String
	 * @param stream  Stream to be read
	 * @return  String result of input stream
	 * @throws IOException
	 * @throws UnsupportedEncodingException
	 */
	public static String readStream(InputStream stream) throws IOException {
		BufferedReader r = new BufferedReader(new InputStreamReader(stream));
		StringBuilder result = new StringBuilder();
		String line;
		while ((line = r.readLine()) != null) {
		   result.append(line);
		}
		return result.toString();
	}
	
	/**
	 * Check the current network connectivity
	 * @return  Boolean indicating availability of network connection
	 */
	public static boolean checkConnection(Context context) {
		ConnectivityManager connMgr = (ConnectivityManager) 
		        context.getSystemService(Context.CONNECTIVITY_SERVICE);
	    
		NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
	    return networkInfo != null && networkInfo.isConnected();
	}
	

}
